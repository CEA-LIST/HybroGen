#ImageDiff Application Folder

## Application code
### Description
This application performs image differencing between two images in order to detect any difference between the two. It is used for example in astronomy, to locate fluctuating or moving objects. The main goal of this experimentation folder is to evaluate the performance of image differencing when using either a common RISC-V architecture or a RISC-V + IMC (C-SRAM) architecture. Performance is also evaluated depending of whether or not a standard compiler (i.e. GCC) or Hybrolang is used for the computation kernel

### Code base
- `main.hl` : Main source code of the application
- `pixmap.h` : Lightweight library to manipulate Portable aNyMap (.PNM) image files
- `software_dima.h` : Software implementation of DIMA transfers (to evaluate the overhead of scalar memory accesses)
- csram\_\*.h : Macros to build and generate C-SRAM instructions in C

### Building
The source code of the application is the C/Hybrolang source `main.hl`. It contains four versions, each associated with a Makefile rule (unchecked entries are non-functionnal):
- [x] `ImageDiff_c_riscv` : Unspecialized (RISC-V scalar) version written in C and compiled with GCC
- [x] `ImageDiff_c_cxram` : C-SRAM version written in C, using macros generated by PyISAGen and compiled with GCC
- [ ] `ImageDiff_h2_riscv` : RISC-V scalar version written in C & Hybrolang and compiled with GCC
- [x] `ImageDiff_h2_cxram` : C-SRAM version written in C & Hybrolang and compiled with GCC

### Running an ImageDiff
- `USAGE : ./ImageDiff <src_img1> <src_img2> <dest_img>`
The application takes three file paths `src_img1`, `src_img2` & `dest_img`, and performs the image differencing `src_img1 - src_img2`, to finally store the result in the file `dest_img`.
For now, the ImageDiff application is only compatible with Portable GrayMap (.PGM) images. Other formats (Portable Bitmaps [.PBM] & Portable aNyMap [.PNM]) may be supported in the future.
To obtain .PGM images, you can use ImageMagick on images of your choice. An example below :
- `convert <your_image.jpeg> <your_image.pbm>`
You can find example images in the TestImages folder

## gen\_stats.py script
### Overview
To automate the performance evaluation of the study cases mentionned in the previous section, the `gen_stats.py` script can be used. It takes no input, automates the simulation runs and computes the performance statistics, before writing them to Statistics.xlsx (Excel 2008) and Statistics.txt files.
### Python requirements :
- `numpy`, `pandas`, `matplotlib`, `tabulate`, `openpyxl` (you can use either the package manager of your distribution or `pip` to install these).
